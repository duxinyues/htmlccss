<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>canvas实现图片卷筒</title>
</head>
<body>
    <canvas id="canvas"></canvas>

    <script>
        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext("2d");

        var productImg = new Image();
        productImg.onload = function(){
            var w = productImg.width;
            var h = productImg.height;

            canvas.width = w;
            canvas.height = h;
            ctx.drawImage(productImg,0,0,productImg.width, productImg.height,0,0,w,h);

            ctx.beginPath();
            ctx.moveTo(88,235.734375);
            ctx.bezierCurveTo(88,235.734375,204,298,327,234.734375);
            ctx.stoke();
        };

        // productImg.src = "https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1553577084406&di=32efaf4a9c9d6b4130cd691f874fa6fc&imgtype=0&src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fitem%2F201203%2F13%2F20120313210112_WMJLQ.thumb.700_0.jpeg";

        var img = new Image();
        img.onload = start;
        img.src = "https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1553577084406&di=32efaf4a9c9d6b4130cd691f874fa6fc&imgtype=0&src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fitem%2F201203%2F13%2F20120313210112_WMJLQ.thumb.700_0.jpeg";
        var pointer = 0;
        function start(){
            var w = img.width;
            var h = img.height;

            var xOffset = 125;
            var yOffset = 122;

            var a = 122.0;
            var b = 30.0;

            var scaleFactor = w/(2*a);

            for(var X = 0;X<w;X+=1){
                var y = b/a*Math.sqrt(a*a-(X-a)*(X-a));
                ctx.drawImage(img,X*scaleFactor,0,6,h,X+xOffset,y+yOffset,1,h-605+y/2)
            }
        }
    </script>
</body>
</html>